<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- 제목 최적화 -->
    <title>Free Online PDF to JPG Converter | Convert PDF to PNG | No Sign Up Required</title>
    
    <!-- 메타 설명 개선 -->
    <meta name="description" content="Convert PDF to JPG/PNG online for free. High-quality image conversion, instant download, no registration needed. Secure local processing - your files never leave your device. Perfect for documents, presentations & graphics.">
    
    <!-- 키워드 최적화 -->
    <meta name="keywords" content="pdf to jpg converter, pdf to png converter, convert pdf to image, free pdf converter, online pdf tools, pdf to image converter, secure pdf converter, no signup converter, local pdf conversion, high quality pdf converter">
    
    <!-- Open Graph 태그 개선 -->
    <meta property="og:title" content="Free Online PDF to JPG/PNG Converter - No Registration Required">
    <meta property="og:description" content="Convert PDF files to high-quality JPG/PNG images instantly. Free, secure, and private - no file upload needed. Perfect for documents & presentations.">
    <meta property="og:image" content="https://www.freepdf2jpg.ca/static/preview.jpg">
    <meta property="og:url" content="https://www.freepdf2jpg.ca">
    <meta property="og:type" content="website">
    
    <!-- Twitter 카드 최적화 -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Free PDF to JPG/PNG Converter - Convert PDFs Instantly">
    <meta name="twitter:description" content="Transform PDF files into high-quality JPG/PNG images. Free, secure, instant conversion with no registration required.">
    <meta name="twitter:image" content="https://www.freepdf2jpg.ca/static/preview.jpg">
    
    <!-- 추가 메타 태그 -->
    <meta name="robots" content="index, follow, max-image-preview:large">
    <meta name="author" content="FreePDF2JPG.ca">
    <meta name="copyright" content="FreePDF2JPG.ca">
    <meta name="application-name" content="FreePDF2JPG Converter">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1565c0">
    
    <!-- 언어 및 지역 설정 -->
    <link rel="alternate" hreflang="x-default" href="https://www.freepdf2jpg.ca/">
    <link rel="alternate" hreflang="en" href="https://www.freepdf2jpg.ca/en/">
    <link rel="alternate" hreflang="fr" href="https://www.freepdf2jpg.ca/fr/">
    <link rel="alternate" hreflang="es" href="https://www.freepdf2jpg.ca/es/">
    <link rel="alternate" hreflang="ko" href="https://www.freepdf2jpg.ca/ko/">
    <link rel="alternate" hreflang="ja" href="https://www.freepdf2jpg.ca/ja/">
    <link rel="alternate" hreflang="zh" href="https://www.freepdf2jpg.ca/zh/">
    
    <!-- 캐노니컬 URL -->
    <link rel="canonical" href="https://www.freepdf2jpg.ca">
    
    <!-- 파비콘 최적화 -->
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    
    <!-- Schema.org 마크업 추가 -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "FreePDF2JPG Converter",
      "url": "https://www.freepdf2jpg.ca",
      "description": "Free online PDF to JPG/PNG converter with high-quality output and secure local processing.",
      "applicationCategory": "Converter",
      "operatingSystem": "All",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": [
        "High-quality conversion",
        "Secure local processing",
        "No registration required",
        "Instant conversion"
      ]
    }
    </script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="{{ url_for('static', filename='favicon.png') }}" type="image/png">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YXVW0Q8MJ5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-YXVW0Q8MJ5');
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Fredoka&display=swap" rel="stylesheet">
    <style>
      #stars {
        display: inline-block;
      }

      #stars span {
        font-size: 1.4em;
        color: #ccc;
        cursor: pointer;
        transition: color 0.2s;
      }

      #stars span.hovered {
        color: gold;
      }

      #stars span.selected {
        color: gold;
      }
      .menu-button {
        background: #f8f9fa;
        color: #1565c0;
        border: 2px solid #90caf9;
        border-radius: 8px;          /* 10px → 8px */
        padding: 6px 10px;          /* 8px 12px → 6px 10px */
        margin-right: 4px;          /* 6px → 4px */
        text-decoration: none;
        font-weight: bold;
        font-size: 0.85em;
        display: inline-flex;
        align-items: center;
        gap: 3px;                   /* 4px → 3px */
        box-shadow: 0 2px 4px rgba(0,0,0,0.06);  /* 6px → 4px */
        transition: all 0.3s ease;
      }
      .menu-button:hover {
        background: #e3f2fd;
        border-color: #42a5f5;
        transform: translateY(-1px);
      }
      body {
        font-family: 'Fredoka', sans-serif;
        background: linear-gradient(to bottom, #fff8f0, #e1f5fe);  /* 변경된 그라디에이션 */
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
      }
      header {
        margin-top: 85px;
        text-align: center;
      }
      h1 {
        font-size: 2.3em;
        color: #455a64;
        margin-bottom: 2px;
      }
      p {
        font-size: 1.12em;
        color: #607d8b;
        margin-top: 0px;
        margin-bottom: 3px;
      }
      .lang-switcher {
        position: fixed;
        top: 0;
        right: 0;
        z-index: 1000;
        display: flex;
        gap: 6px;                              /* 8px → 6px */
        background: rgba(255, 255, 255, 0.95);
        border-radius: 0 0 0 8px;
        padding: 4px 6px;                      /* 6px 8px → 4px 6px */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
      }
      .lang-switcher img {
        width: 24px;                           /* 28px → 24px */
        height: 16px;                          /* 20px → 16px */
        cursor: pointer;
        border-radius: 3px;
        border: 1px solid #ddd;
        transition: transform 0.2s ease;
      }
      .lang-switcher img:hover {
        transform: translateY(-1px);            /* box-shadow 효과를 transform으로 변경 */
      }
      .lang-switcher img.active {
        border-color: #42a5f5;
        box-shadow: 0 0 0 2px rgba(66,165,245,0.2);
      }
      form {
        margin-top: 15px;
        text-align: center;
      }
      .upload-box {
        border: 2px dashed #90caf9;
        padding: 30px;
        border-radius: 15px;
        background-color: #f5f5f5;
        color: #1565c0;
        font-size: 1.1em;
        margin-bottom: 20px;
        position: relative;
      }
      .upload-box label {
        cursor: pointer;
        padding: 10px 20px;
        background-color: #e3f2fd;
        border-radius: 8px;
        display: inline-block;
        color: #0d47a1;
        font-weight: bold;
      }
      .upload-box input[type="file"] {
        display: none;
      }
      #fileName {
        margin-top: 15px;
        color: #333;
        font-size: 0.95em;
      }
      button {
        font-size: 1.1em;
        padding: 12px 25px;
        border: none;
        border-radius: 30px;
        background-color: #81c784;
        color: white;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }
      button:hover {
        background-color: #66bb6a;
      }
      #progressContainer {
        display: none;
        width: 80%;
        margin-top: 20px;
        text-align: center;
      }
      #progressBar {
        height: 25px;
        width: 0%;
        background: linear-gradient(to right, #81c784, #66bb6a);
        border-radius: 10px;
        text-align: center;
        color: white;
        line-height: 25px;
        font-weight: bold;
        transition: width 0.3s ease-in-out, background-color 0.3s;
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
      }
      #progressMessage {
        font-size: 1em;
        color: #4e342e;
        margin-bottom: 8px;
        display: none;
      }
      .info {
        margin-top: 20px;
        margin-bottom: 0px;
        text-align: center;
        color: #4e342e;
        font-size: 1em;
        background: #e8f5e9;
        padding: 6px 18px 4px 18px;
        border-radius: 10px;
        width: 80%;
      }
      footer {
        margin-top: 4px;
        padding: 10px 20px;
        text-align: center;
        color: #a1887f;
        font-size: 0.8em;
      }
      .features-container {
        margin: 10px auto;
        max-width: 800px;
        text-align: left;
        padding: 20px;
      }
  
      .features-list {
        list-style: none;
        padding: 0;
      }
  
      .features-list li {
        margin: 10px 0;
        display: flex;
        align-items: center;
        gap: 10px;
        color: #455a64;
      }
  
      .section-title {
        color: #455a64;
        margin-bottom: 15px;
      }
  
      .steps-list {
        color: #455a64;
        padding-left: 20px;
      }
  
      .steps-list li {
        margin: 8px 0;
      }
  
      .why-choose-box {
        background: #e3f2fd;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
      }
  
      header p {
        margin-bottom: 10px;
      }
    </style>
</head>
<body>
  <div style="position: fixed; top: 40px; left: 0; z-index: 1000; display: flex; gap: 3px; background: transparent; border-radius: 0 0 8px 0; padding: 3px 4px;">
    <a href="/about" class="menu-button">ℹ️ About</a>
    <a href="/" class="menu-button">📄 PDF to JPG</a>
    <a href="/jpg-to-pdf" class="menu-button">🖼️ JPG to PDF</a>
  </div>
  <div class="lang-switcher">
    <img src="https://flagcdn.com/gb.svg" alt="English" title="English" data-lang="en" onclick="setActiveLang(this, 'en')">
    <img src="https://flagcdn.com/fr.svg" alt="Français" title="Français" data-lang="fr" onclick="setActiveLang(this, 'fr')">
    <img src="https://flagcdn.com/es.svg" alt="Español" title="Español" data-lang="es" onclick="setActiveLang(this, 'es')">
    <img src="https://flagcdn.com/kr.svg" alt="한국어" title="한국어" data-lang="ko" onclick="setActiveLang(this, 'ko')">
    <img src="https://flagcdn.com/jp.svg" alt="日本語" title="日本語" data-lang="ja" onclick="setActiveLang(this, 'ja')">
    <img src="https://flagcdn.com/cn.svg" alt="中文" title="中文" data-lang="zh" onclick="setActiveLang(this, 'zh')">
  </div>
  
  <header>
    <h1 id="mainTitle">Free Online PDF to JPG/PNG Converter</h1>
    <p id="mainDesc">Convert your PDF files into high-quality JPG or PNG images. 100% Free.</p>
    
    <div class="features-container">
        <h2 id="featuresTitle" class="section-title">Key Features</h2>
        <ul class="features-list">
            <li><span class="feature-icon">✨</span> <span id="feature1">High-quality conversion with original resolution preservation</span></li>
            <li><span class="feature-icon">🔒</span> <span id="feature2">Secure local processing - files never leave your device</span></li>
            <li><span class="feature-icon">⚡</span> <span id="feature3">Instant conversion without waiting time</span></li>
            <li><span class="feature-icon">📱</span> <span id="feature4">Works on all devices - mobile, tablet, and desktop</span></li>
        </ul>

        <h2 id="howToTitle" class="section-title">How to Convert PDF to JPG/PNG</h2>
        <ol class="steps-list">
            <li id="step1">Upload your PDF file using the selector or drag & drop</li>
            <li id="step2">Choose your preferred output format (JPG or PNG)</li>
            <li id="step3">Click "Convert Now" and wait for the process to complete</li>
            <li id="step4">Download your converted images automatically</li>
        </ol>

        <div class="why-choose-box">
            <h3 id="whyChooseTitle">Why Choose Our Converter?</h3>
            <p id="whyChooseContent">Our tool provides professional-grade conversion quality while maintaining your privacy. Unlike other converters, we process everything locally in your browser, ensuring your files are never uploaded to any server. Perfect for sensitive documents and fast processing.</p>
        </div>
    </div>
</header>


  <form method="post" action="/convert" enctype="multipart/form-data" onsubmit="return handleSubmit()">
    <div class="upload-box">
      <label for="fileInput" id="chooseFileLabel">📄 Choose PDF File</label>
      <input type="file" id="fileInput" name="pdf" accept="application/pdf" required>
      <div id="fileName">No file selected</div>
    </div>
    <div style="margin-bottom: 20px;">
      <label for="formatSelect" style="font-weight:bold; color:#1565c0;"><span data-i18n="output-format">Output Format:</span></label>
      <select id="formatSelect" name="format" required style="margin-left: 10px; padding: 8px; border-radius: 6px; border: 1px solid #ccc;">
        <option value="jpg" selected>JPG</option>
        <option value="png">PNG</option>
      </select>
    </div>
    <button type="submit" id="submitBtn">Convert Now</button>
  </form>

  <div id="progressContainer">
    <div id="progressMessage">Preparing your file. It will download automatically when ready.</div>
    <div style="width: 100%; background: #e0e0e0; border-radius: 10px;">
      <div id="progressBar">0%</div>
    </div>
  </div>

  <div style="margin-top: 10px; margin-bottom: -10px; font-size: 1em; text-align: center;">
    <p id="mergeJPGPrompt" style="margin: 0;">
      Need to merge JPGs into a single PDF?
      <a href="/jpg-to-pdf" id="mergeJPGLink" style="color:#1565c0; font-weight:bold; text-decoration: underline;">Try our JPG to PDF Merger</a>
    </p>
  </div>

  <div class="info">
    <div><span class="info-emoji">🌱</span> <strong class="info-line1" id="infoLine1">This is a completely free PDF to JPG/PNG converter</strong></div>
    <div><span class="info-emoji">🔒</span> <span class="info-line2" id="infoLine2">We do not store any files. Everything is deleted instantly.</span></div>
    <div><span class="info-emoji">🌍</span> <span class="info-line3" id="infoLine3">Enjoy fast and secure PDF conversion!</span></div>
  </div>

  <div id="rating-box" style="display: none; margin-top: 20px; text-align: center;">
    <div style="background-color: #fff8f0; padding: 16px 20px; border-radius: 12px; display: inline-block; box-shadow: 0 2px 6px rgba(0,0,0,0.08);">
      <p id="ratingPrompt" data-i18n="ratingPrompt">⭐ How would you rate this tool?</p>
      <div id="stars" style="font-size: 1.4em; cursor: pointer;">
        <span data-value="1">☆</span>
        <span data-value="2">☆</span>
        <span data-value="3">☆</span>
        <span data-value="4">☆</span>
        <span data-value="5">☆</span>
      </div>
      <p id="vote-result" style="font-size: 0.95em; color: #333;">Average: - / 5.0</p>
    </div>
  </div>

  <footer style="margin-top: 10px;">
    ⓒ 2025 FreePDF2JPG. All rights reserved.
  </footer>

  <script>
    // Language translations
    const translations = {
      en: {
        mainTitle: "Free Online PDF to JPG/PNG Converter",
        mainDesc: "Convert your PDF files into high-quality JPG or PNG images. 100% Free.",
        chooseFileLabel: "📄 Choose PDF File",
        convertNow: "Convert Now",
        fileNone: "No file selected",
        progressMsg: "Preparing your file. It will download automatically when ready.",
        infoLine1: "This is a completely free PDF to JPG/PNG converter",
        infoLine2: "We do not store any files. Everything is deleted instantly.",
        infoLine3: "Enjoy fast and secure PDF conversion!",
        outputFormat: "Output Format:",
        mergePrompt: "Need to merge JPGs into a single PDF?",
        mergeLink: "Try our JPG to PDF Merger",
        feature1: "High-quality conversion with original resolution preservation",
        feature2: "Secure local processing - files never leave your device",
        feature3: "Instant conversion without waiting time",
        feature4: "Works on all devices - mobile, tablet, and desktop",
        step1: "Upload your PDF file using the selector or drag & drop",
        step2: "Choose your preferred output format (JPG or PNG)",
        step3: "Click \"Convert Now\" and wait for the process to complete",
        step4: "Download your converted images automatically",
        whyChooseTitle: "Why Choose Our Converter?",
        whyChooseContent: "Our tool provides professional-grade conversion quality while maintaining your privacy. Unlike other converters, we process everything locally in your browser, ensuring your files are never uploaded to any server. Perfect for sensitive documents and fast processing.",
        ratingPrompt: "⭐ How would you rate this tool?"
      },
      fr: {
        mainTitle: "Convertisseur PDF en JPG/PNG Gratuit en Ligne",
        mainDesc: "Convertissez vos fichiers PDF en images JPG ou PNG de haute qualité. 100% gratuit.",
        chooseFileLabel: "📄 Choisir un fichier PDF",
        convertNow: "Convertir maintenant",
        fileNone: "Aucun fichier sélectionné",
        progressMsg: "Préparation de votre fichier. Il sera téléchargé automatiquement.",
        infoLine1: "Ceci est un convertisseur PDF en JPG/PNG entièrement gratuit",
        infoLine2: "Nous ne stockons aucun fichier. Tout est supprimé instantanément.",
        infoLine3: "Profitez d'une conversion PDF rapide et sécurisée !",
        outputFormat: "Format de sortie:",
        mergePrompt: "Besoin de fusionner des JPG en un seul PDF ?",
        mergeLink: "Essayez notre outil JPG vers PDF",
        feature1: "Conversion de haute qualité avec préservation de la résolution d'origine",
        feature2: "Traitement local sécurisé - les fichiers ne quittent jamais votre appareil",
        feature3: "Conversion instantanée sans temps d'attente",
        feature4: "Fonctionne sur tous les appareils - mobile, tablette et ordinateur de bureau",
        step1: "Téléchargez votre fichier PDF en utilisant le sélecteur ou en glissant-déposant",
        step2: "Choisissez votre format de sortie préféré (JPG ou PNG)",
        step3: "Cliquez sur \"Convertir maintenant\" et attendez la fin du processus",
        step4: "Téléchargez automatiquement vos images converties",
        whyChooseTitle: "Pourquoi choisir notre convertisseur ?",
        whyChooseContent: "Notre outil offre une qualité de conversion professionnelle tout en préservant votre vie privée. Contrairement à d'autres convertisseurs, nous traitons tout localement dans votre navigateur, garantissant que vos fichiers ne sont jamais téléchargés sur un serveur. Parfait pour les documents sensibles et le traitement rapide.",
        ratingPrompt: "⭐ Quelle note donneriez-vous à cet outil ?"
      },
      es: {
        mainTitle: "Convertidor Online Gratis de PDF a JPG/PNG",
        mainDesc: "Convierte tus archivos PDF en imágenes JPG o PNG de alta calidad. 100% gratis.",
        chooseFileLabel: "📄 Elegir archivo PDF",
        convertNow: "Convertir ahora",
        fileNone: "Ningún archivo seleccionado",
        progressMsg: "Preparando su archivo. Se descargará automáticamente cuando esté listo.",
        infoLine1: "Este es un convertidor de PDF a JPG/PNG completamente gratuito",
        infoLine2: "No almacenamos ningún archivo. Todo se elimina instantáneamente.",
        infoLine3: "¡Disfruta de una conversión de PDF rápida y segura!",
        outputFormat: "Formato de salida:",
        mergePrompt: "¿Necesitas combinar JPGs en un solo PDF?",
        mergeLink: "Prueba nuestro combinador JPG a PDF",
        feature1: "Conversión de alta calidad con preservación de la resolución original",
        feature2: "Procesamiento local seguro: los archivos nunca salen de su dispositivo",
        feature3: "Conversión instantánea sin tiempo de espera",
        feature4: "Funciona en todos los dispositivos: móvil, tableta y escritorio",
        step1: "Sube tu archivo PDF usando el selector o arrastrar y soltar",
        step2: "Elige tu formato de salida preferido (JPG o PNG)",
        step3: "Haz clic en \"Convertir ahora\" y espera a que se complete el proceso",
        step4: "Descarga tus imágenes convertidas automáticamente",
        whyChooseTitle: "¿Por qué elegir nuestro convertidor?",
        whyChooseContent: "Nuestra herramienta ofrece una calidad de conversión de nivel profesional mientras mantiene su privacidad. A diferencia de otros convertidores, procesamos todo localmente en su navegador, asegurando que sus archivos nunca se suban a ningún servidor. Perfecto para documentos sensibles y procesamiento rápido.",
        ratingPrompt: "⭐ ¿Qué puntuación le darías a esta herramienta?"
      },
      ko: {
        mainTitle: "무료 온라인 PDF JPG/PNG 변환기",
        mainDesc: "PDF 파일을 고화질 JPG 또는 PNG 이미지로 변환하세요. 100% 무료.",
        chooseFileLabel: "📄 PDF 파일 선택",
        convertNow: "지금 변환",
        fileNone: "선택된 파일 없음",
        progressMsg: "파일을 준비 중입니다. 준비되면 자동으로 다운로드됩니다.",
        infoLine1: "완전히 무료인 PDF JPG/PNG 변환기입니다",
        infoLine2: "파일을 저장하지 않습니다. 모든 파일은 즉시 삭제됩니다.",
        infoLine3: "빠르고 안전한 PDF 변환을 즐기세요!",
        outputFormat: "출력 형식:",
        mergePrompt: "여러 JPG 파일을 하나의 PDF로 병합하고 싶으신가요?",
        mergeLink: "JPG to PDF 병합기를 사용해보세요",
        feature1: "원본 해상도를 유지한 고품질 변환",
        feature2: "안전한 로컬 처리 - 파일이 장치를 떠나지 않습니다",
        feature3: "대기 시간 없이 즉시 변환",
        feature4: "모든 장치에서 작동 - 모바일, 태블릿 및 데스크탑",
        step1: "선택기 또는 드래그 앤 드롭을 사용하여 PDF 파일 업로드",
        step2: "선호하는 출력 형식 선택 (JPG 또는 PNG)",
        step3: "\"지금 변환\"을 클릭하고 프로세스가 완료될 때까지 기다리세요",
        step4: "변환된 이미지를 자동으로 다운로드",
        whyChooseTitle: "우리의 변환기를 선택하는 이유는?",
        whyChooseContent: "우리의 도구는 귀하의 개인 정보를 유지하면서 전문적인 수준의 변환 품질을 제공합니다. 다른 변환기와 달리, 우리는 모든 것을 브라우저에서 로컬로 처리하여 파일이 서버에 업로드되지 않도록 보장합니다. 민감한 문서와 빠른 처리를 위해 완벽합니다.",
        ratingPrompt: "⭐ 이 도구를 어떻게 평가하시겠어요?"
      },
      ja: {
        mainTitle: "無料オンラインPDF→JPG/PNG変換ツール",
        mainDesc: "PDFファイルを高画質JPGまたはPNG画像に変換。完全無料。",
        chooseFileLabel: "📄 PDFファイルを選択",
        convertNow: "今すぐ変換",
        fileNone: "ファイルが選択されていません",
        progressMsg: "ファイルを準備中です。準備ができ次第、自動でダウンロードされます。",
        infoLine1: "完全無料のPDF→JPG/PNG変換ツールです",
        infoLine2: "ファイルは保存されません。すべて即時削除されます。",
        infoLine3: "高速・安全なPDF変換をお楽しみください！",
        outputFormat: "出力形式:",
        mergePrompt: "複数のJPGを1つのPDFに結合したいですか？",
        mergeLink: "JPG to PDF結合ツールを試す",
        feature1: "元の解像度を保持した高品質な変換",
        feature2: "安全なローカル処理 - ファイルはデバイスを離れません",
        feature3: "待ち時間なしの即時変換",
        feature4: "すべてのデバイスで動作 - モバイル、タブレット、デスクトップ",
        step1: "セレクターを使用するかドラッグ＆ドロップしてPDFファイルをアップロード",
        step2: "希望の出力形式を選択（JPGまたはPNG）",
        step3: "\"今すぐ変換\"をクリックし、プロセスが完了するのを待ちます",
        step4: "変換された画像を自動的にダウンロード",
        whyChooseTitle: "なぜ私たちの変換ツールを選ぶのか？",
        whyChooseContent: "私たちのツールは、プライバシーを維持しながらプロフェッショナルな変換品質を提供します。他の変換ツールとは異なり、すべてをブラウザ内でローカルに処理し、ファイルがサーバーにアップロードされないようにします。機密文書や迅速な処理に最適です。",
        ratingPrompt: "⭐ このツールをどう評価しますか？"
      },
      zh: {
        mainTitle: "免费在线PDF转JPG/PNG工具",
        mainDesc: "将PDF文件转换为高质量JPG或PNG图片。完全免费。",
        chooseFileLabel: "📄 选择PDF文件",
        convertNow: "立即转换",
        fileNone: "未选择文件",
        progressMsg: "正在准备您的文件。准备好后会自动下载。",
        infoLine1: "这是完全免费的PDF转JPG/PNG工具",
        infoLine2: "我们不会存储任何文件。所有内容会立即删除。",
        infoLine3: "享受快速安全的PDF转换！",
        outputFormat: "输出格式：",
        mergePrompt: "想要将多个 JPG 合并为一个 PDF 吗？",
        mergeLink: "试试我们的 JPG 合并为 PDF 工具",
        feature1: "高质量转换，保留原始分辨率",
        feature2: "安全的本地处理 - 文件永远不会离开您的设备",
        feature3: "即时转换，无需等待时间",
        feature4: "适用于所有设备 - 手机、平板电脑和桌面",
        step1: "使用选择器上传您的PDF文件或拖放",
        step2: "选择您喜欢的输出格式（JPG或PNG）",
        step3: "点击“立即转换”，等待过程完成",
        step4: "自动下载转换后的图像",
        whyChooseTitle: "为什么选择我们的转换器？",
        whyChooseContent: "我们的工具在保持您的隐私的同时提供专业级的转换质量。与其他转换器不同，我们在您的浏览器中本地处理所有内容，确保您的文件永远不会上传到任何服务器。非常适合敏感文档和快速处理。",
        ratingPrompt: "⭐ 您如何评价这个工具？"
      }
    };

    function switchLang(lang) {
      const t = translations[lang];
      if (!t) return;
      document.getElementById('mainTitle').textContent = t.mainTitle;
      document.getElementById('mainDesc').textContent = t.mainDesc;
      document.getElementById('chooseFileLabel').textContent = t.chooseFileLabel;
      document.getElementById('submitBtn').textContent = t.convertNow;
      document.getElementById('fileName').textContent = t.fileNone;
      document.getElementById('progressMessage').textContent = t.progressMsg;
      document.getElementById('infoLine1').textContent = t.infoLine1;
      document.getElementById('infoLine2').textContent = t.infoLine2;
      document.getElementById('infoLine3').textContent = t.infoLine3;

      // Update Output Format label
      const outputFormatSpans = document.querySelectorAll('[data-i18n="output-format"]');
      outputFormatSpans.forEach(span => {
        span.textContent = t.outputFormat;
      });

      document.getElementById('mergeJPGPrompt').childNodes[0].textContent = t.mergePrompt + ' ';
      document.getElementById('mergeJPGLink').textContent = t.mergeLink;

      // Update features and steps
      document.getElementById('feature1').textContent = t.feature1;
      document.getElementById('feature2').textContent = t.feature2;
      document.getElementById('feature3').textContent = t.feature3;
      document.getElementById('feature4').textContent = t.feature4;
      document.getElementById('step1').textContent = t.step1;
      document.getElementById('step2').textContent = t.step2;
      document.getElementById('step3').textContent = t.step3;
      document.getElementById('step4').textContent = t.step4;
      document.getElementById('whyChooseTitle').textContent = t.whyChooseTitle;
      document.getElementById('whyChooseContent').textContent = t.whyChooseContent;
      // Update rating prompt
      document.getElementById('ratingPrompt').textContent = t.ratingPrompt;
    }

    // Add .active class to selected flag and switch language
    function setActiveLang(img, lang) {
      document.querySelectorAll('.lang-switcher img').forEach(el => el.classList.remove('active'));
      img.classList.add('active');
      switchLang(lang);
      localStorage.setItem('pdf2jpg_lang', lang);
    }

    // On page load, set default language and active flag
    window.addEventListener('DOMContentLoaded', function () {
      let lang = localStorage.getItem('pdf2jpg_lang') || 'en';
      const flag = document.querySelector(`.lang-switcher img[data-lang="${lang}"]`);
      if (flag) setActiveLang(flag, lang);
      else switchLang('en');
    });

    function startFakeProgress() {
      const bar = document.getElementById('progressBar');
      document.getElementById('submitBtn').disabled = true;
      let progress = 0;
      const interval = setInterval(() => {
        if (progress < 100) {
          progress += Math.floor(Math.random() * 6) + 5;
          if (progress > 100) progress = 100;
          bar.style.width = progress + '%';
          bar.textContent = progress + '%';
        } else {
          clearInterval(interval);
          document.getElementById('submitBtn').disabled = false;
        }
      }, 50);
    }

    function handleSubmit() {
      document.getElementById('progressContainer').style.display = 'block';
      document.getElementById('progressMessage').style.display = 'block';
      startFakeProgress();
      return true;
    }

    // 파일 입력 이벤트 리스너
    document.getElementById('fileInput').addEventListener('change', function() {
      const lang = document.querySelector('.lang-switcher img.active')?.getAttribute('data-lang') || 'en';
      const fileName = this.files.length > 0 ? this.files[0].name : translations[lang].fileNone;
      document.getElementById('fileName').textContent = fileName;

      // Reset progress elements
      document.getElementById('progressContainer').style.display = 'none';
      document.getElementById('progressMessage').style.display = 'none';
      const bar = document.getElementById('progressBar');
      bar.style.width = '0%';
      bar.textContent = '0%';
      document.getElementById('submitBtn').disabled = false;
    });

    // 페이지 로드 시 언어 설정
    window.addEventListener('DOMContentLoaded', function() {
      let lang = localStorage.getItem('pdf2jpg_lang') || 'en';
      const flag = document.querySelector(`.lang-switcher img[data-lang="${lang}"]`);
      if (flag) {
        setActiveLang(flag, lang);
      } else {
        switchLang('en');
      }
    });
  </script>
  <script>
    // Fetch and display initial rating stats
    window.addEventListener('DOMContentLoaded', function () {
      const lang = localStorage.getItem('pdf2jpg_lang') || 'en';
      fetch(`/rate?lang=${lang}`)
        .then(async res => {
          let data = await res.json();
          if (res.ok) {
            document.getElementById('vote-result').textContent =
              `Average: ${data.average.toFixed(1)} / 5.0 (${data.count} votes)`;
          }
        })
        .catch(() => {});
    });
    // Rating stars interaction
    const stars = document.querySelectorAll('#stars span');
    let selectedRating = 0;

    function updateStars(rating) {
      stars.forEach((s, j) => {
        s.classList.remove('hovered');
        s.classList.remove('selected');

        if (selectedRating > 0 && j < selectedRating) {
          s.classList.add('selected');
          s.textContent = '★';
        } else if (rating > 0 && j < rating) {
          s.classList.add('hovered');
          s.textContent = '★';
        } else {
          s.textContent = '☆';
        }
      });
    }

    stars.forEach((star, i) => {
      star.addEventListener('mouseenter', () => updateStars(i + 1));
      star.addEventListener('mouseleave', () => updateStars(selectedRating));
      star.addEventListener('click', () => {
        selectedRating = i + 1;
        const lang = localStorage.getItem('pdf2jpg_lang') || 'en';
        fetch(`/rate?lang=${lang}`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ rating: selectedRating })
        })
        .then(async res => {
          let data;
          try {
            data = await res.json();
          } catch (e) {
            throw new Error("Server returned non-JSON response");
          }
          if (!res.ok) throw new Error(data?.error || "Unknown server error");

          document.getElementById('vote-result').textContent =
            `Average: ${data.average.toFixed(1)} / 5.0 (${data.count} votes)`;
          updateStars(selectedRating);
        })
        .catch(err => alert("⚠️ " + err.message));
      });
    });

    // --- Floating rating badge logic ---
    function toggleRatingBox() {
      const box = document.getElementById('rating-box');
      if (box.style.display === 'none' || box.style.display === '') {
        box.style.display = 'block';
        box.scrollIntoView({ behavior: 'smooth' });
      } else {
        box.style.display = 'none';
      }
    }

    // Show floating rating badge on load
    window.addEventListener('DOMContentLoaded', function () {
      const lang = localStorage.getItem('pdf2jpg_lang') || 'en';
      fetch(`/rate?lang=${lang}`)
        .then(async res => {
          let data = await res.json();
          if (res.ok) {
            const avg = data.average.toFixed(1);
            const count = data.count;
            document.getElementById('vote-result').textContent =
              `Average: ${avg} / 5.0 (${count} votes)`;
            document.getElementById('rating-fab').style.display = 'block';
            document.getElementById('rating-fab-value').textContent = avg;
          }
        })
        .catch(() => {});
    });
  </script>
  <div id="rating-fab" onclick="toggleRatingBox()" style="
    position: fixed;
    bottom: 16px;
    right: 16px;
    background: white;
    border: 1px solid #ccc;
    border-radius: 20px;
    padding: 6px 12px;
    font-size: 0.9em;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    cursor: pointer;
    z-index: 999;
    display: none;">
    ⭐️ <span id="rating-fab-value">-</span> / 5.0
  </div>
</body>
</html>
